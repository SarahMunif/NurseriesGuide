{% extends 'main/base.html' %}

{% load static %}

{% block title %}{{nursery.name}}{% endblock %}

{% block hero %}

<style>
  h1, h2, h3, h4 {
    color: #343779;
  }

  h5 {
    color: #fecdd0;
  }

  .icon {
    color: #F28B82;
  }

  #galleryCarousel .carousel-item img,
  #galleryCarousel .carousel-item video {
      height: 50vh;
      object-fit: contain;
  }

  #galleryCarousel .carousel-control-prev-icon,
  #galleryCarousel .carousel-control-next-icon {
      background-image: none;
  }

  #galleryCarousel .carousel-control-prev-icon::after,
  #galleryCarousel .carousel-control-next-icon::after {
      content: '';
      display: inline-block;
      width: 20px;
      height: 20px;
      border: solid #343779;
      border-width: 0 3px 3px 0;
  }

  #galleryCarousel .carousel-control-prev-icon::after {
      transform: rotate(135deg);
      margin-right: 4px;
  }

  #galleryCarousel .carousel-control-next-icon::after {
      transform: rotate(-45deg);
      margin-left: 4px;
  }

  .hero-padding {
    padding-left: 10vw;
    padding-right: 10vw;
    justify-content: space-between;
    color: #616161;
  }

  .symbols {
    color: #343779;
  }

  /* Blur background when modal is active */
  .modal-backdrop.show {
      opacity: 0.5;
  }

  .modal-open .modal {
      background-color: transparent;
  }


  .modal-open .modal-backdrop {
    opacity: 0.5; /* semi-transparent backdrop */
}

.modal-open .modal-content {
    background-color: transparent;
    border: none;
    backdrop-filter: blur(10px); /* Blurring effect */
    -webkit-backdrop-filter: blur(10px);
}

.blur-background {
    filter: blur(5px); /* Amount of blur */
}

.star{
    transform: translateY(-5rem);
    font-size: 2rem;
    color: #F5888E;
}
.card {
      text-align: right;
     }


     .action-link {
        color: #343779;
        text-decoration: none;
    }

    .action-link:hover {
        color: #F28B82;
    }

    .action-link.accept {
        color: #28a745;
    }

    .action-link.reject {
        color: #dc3545;
    }

    .action-link.review {
        color: #daa549;
    }


</style>


<div id="galleryCarousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
      {% for item in gallery_items %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
          {% if item.video %}
          <video class="d-block w-100" controls>
              <source src="{{ item.video.url }}" type="video/mp4">
          </video>
          {% else %}
          <img src="{{ item.image.url }}" class="d-block w-100" alt="Gallery Image">
          {% endif %}
      </div>
      {% endfor %}
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">السابق</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">التالي</span>
  </button>
</div>




{% if is_owner %}

<div class="row mt-4 hero-padding">
    <div class="col-12 ">
        <div class="d-flex justify-content-end">
            <a href="{% url 'nurseries:add_gallery' nursery.id %}" class="btn btn-outline-pink custom-filter-btn px-5 py-2 center rounded-pill mb-5" data-bs-toggle="modal" data-bs-target="#addGalleryModal">
              إضافة صور | مقاطع فيديو
            </a>
        </div>
    </div>
</div>
{% endif %}


<section class="ylo-section-wrapper">
  <div class="container hero-padding">
    <div class="d-flex justify-content-md-start align-items-center py-5 mt-5  gap-4" >
    <h1>{{nursery.name}}</h1>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-patch-check" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
        <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"/>
        </svg>
    </div>
    <div class="d-flex align-items-center">
        {% if average_rating == 1 %}
        <span class="material-symbols-outlined star">star</span>
        {% elif average_rating == 2 %}
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        {% elif average_rating == 3 %}
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        {% elif average_rating == 4 %}
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>

        {% elif average_rating == 5 %}
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>
        <span class="material-symbols-outlined star">star</span>

        {% endif %}
    </div>
  </div>


    <div class="d-flex justify-content-md-start align-items-center mb-3 gap-5 flex-wrap hero-padding">
      <div class="rounded d-flex align-items-center gap-2 px-3">
        <a class="action-link" href="{{ nursery.address }}">
        <svg height="24" width="24" stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="-0.000634564 19.89 433.877 394.097" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.542 320.51C3.567 321.8 3.74 323.059 4.065 324.4C3.699 329.296 5.212 334.277 8.209 337.918C11.271 341.635 15.74 343.844 20.797 344.134C80.367 347.587 138.88 363.349 195.469 378.593C260.066 395.989 326.866 413.982 395.993 413.987C395.998 413.987 396.008 413.987 396.018 413.987C401.39 413.987 406.757 413.875 412.165 413.657C417.395 413.443 421.92 411.199 425.033 407.304C429.856 404.226 432.594 399.087 432.603 393.019C432.644 365.847 432.949 338.212 433.238 311.482C433.868 253.604 434.523 193.757 432.598 134.848C432.395 128.572 429.287 123.318 424.042 120.34C419.964 116.882 414.987 115.427 409.311 116.43C396.082 118.768 382.423 119.959 368.707 119.959C364.827 119.959 360.963 119.845 357.103 119.665C357.56 120.922 357.779 122.285 357.636 123.704C357.596 124.1 357.525 124.474 357.484 124.865C357.292 126.622 357.032 128.344 356.778 130.065C356.067 134.874 355.143 139.579 353.991 144.202C353.559 145.934 353.112 147.66 352.625 149.376C352.138 151.107 351.599 152.839 351.056 154.561C366.884 155.361 382.433 154.95 397.947 153.291C399.226 206.32 398.663 260.17 398.114 312.306C397.881 334.482 397.652 356.652 397.551 378.827C397.059 378.827 396.571 378.827 396.083 378.827C328.485 378.827 262.329 361.034 198.352 343.83C146.552 329.895 93.04 315.505 38.432 310.335C38.071 294.67 37.624 279.004 37.178 263.334C35.406 201.167 33.568 136.928 37.635 73.806C79.031 74.406 117.425 84.83 155.937 98.619C155.856 96.763 155.739 94.912 155.759 93.066C155.784 91.255 155.901 89.458 156.018 87.653C156.308 83.035 156.841 78.439 157.628 73.874C157.922 72.143 158.248 70.416 158.603 68.689C158.73 68.06 158.826 67.419 158.958 66.793C159.207 65.628 159.572 64.597 160.029 63.703C117.508 49.084 73.548 37.499 27.155 38.664C24.047 38.748 21.194 39.538 18.67 41.03C11.515 42.297 4.355 47.67 3.573 57.345C-1.942 125.672 0.079 195.037 2.034 262.127C2.583 281.592 3.152 301.051 3.542 320.51Z" fill="#f28b82" fill-rule="nonzero" opacity="1" stroke="none"/>
            <path d="M269.243 140.221C269.354 140.254 269.462 140.279 269.573 140.31C269.552 139.952 269.548 139.594 269.527 139.233C269.456 139.561 269.324 139.896 269.243 140.221Z" fill="#f28b82" fill-rule="nonzero" opacity="1" stroke="none"/>
            <path d="M205.768 117.063C205.489 117.197 205.205 117.264 204.915 117.37C205.194 117.476 205.463 117.589 205.738 117.69C205.748 117.482 205.758 117.271 205.768 117.063Z" fill="#f28b82" fill-rule="nonzero" opacity="1" stroke="none"/>
            <path d="M172.71 104.817C173.538 111.967 174.914 118.685 176.356 124.616C176.62 125.708 176.884 126.78 177.153 127.815C188.451 171.775 215.41 219.29 251.119 258.182C253.171 260.416 255.861 261.645 258.7 261.645C261.493 261.645 264.221 260.467 266.307 258.385C266.453 258.283 266.601 258.182 266.748 258.075C268.267 257.572 269.668 256.719 270.866 255.561C293.107 234.03 311.612 205.614 324.17 175.004C327.13 167.775 329.796 160.438 332.061 153.024C332.584 151.328 333.046 149.627 333.524 147.928C334.002 146.227 334.504 144.531 334.951 142.824C336.18 138.074 337.211 133.31 338.125 128.542C338.455 126.831 338.801 125.12 339.09 123.413C339.379 121.694 339.603 119.978 339.847 118.256C340.106 116.431 340.406 114.605 340.618 112.784C340.826 111.012 340.892 109.296 341.024 107.554C342.868 83.025 337.404 61.692 324.896 45.661C311.556 28.558 289.102 19.89 258.167 19.89C254.471 19.89 250.824 20.014 247.595 20.223L243.334 20.223C242.004 20.223 240.694 20.477 239.435 20.977C215.518 21.601 194.652 33.123 182.734 51.78C180.957 54.563 179.362 57.495 178.006 60.583C176.793 63.345 175.802 66.148 174.985 68.977C174.498 70.656 174.066 72.341 173.705 74.038C173.34 75.769 173.05 77.506 172.801 79.248C172.126 84.016 171.887 88.779 171.958 93.454C171.988 95.346 172.07 97.229 172.191 99.085C172.33 101.014 172.492 102.934 172.71 104.817ZM193.937 87.021C194.059 85.209 194.277 83.444 194.526 81.692C194.582 81.314 194.597 80.913 194.658 80.54C194.876 79.166 195.15 77.823 195.486 76.503C196.339 73.134 197.603 69.967 199.162 66.992C206.911 52.21 222.831 42.684 241.751 42.684L243.493 42.704C244.848 42.704 246.143 42.465 247.357 41.993L249.723 41.993C250.368 41.993 251.018 41.93 251.688 41.8C253.857 41.706 256.045 41.66 258.229 41.66C281.659 41.66 298.198 47.743 308.79 60.258C318.124 71.287 321.439 88.633 318.824 111.733C318.703 112.836 318.581 113.932 318.424 115.054C318.318 115.862 318.261 116.613 318.14 117.43C317.997 118.357 317.815 119.286 317.662 120.213C317.378 121.919 317.108 123.623 316.783 125.334C315.848 130.138 314.701 134.954 313.401 139.763C312.944 141.454 312.452 143.145 311.949 144.833C311.451 146.511 310.964 148.192 310.421 149.868C305.206 165.98 298.035 181.819 289.358 196.53C280.898 210.867 271.016 224.129 260.098 235.488C236.608 208.021 217.286 175.283 204.057 140.471C200.777 131.833 198.309 123.746 196.593 116.124C196.42 115.37 196.293 114.637 196.136 113.895C195.715 111.861 195.308 109.833 195.004 107.862C194.689 105.864 194.476 103.924 194.278 101.997C193.749 96.776 193.611 91.78 193.937 87.021Z" fill="#f28b82" fill-rule="nonzero" opacity="1" stroke="none"/>
            <path d="M216.518 116.354C218.711 119.48 221.291 122.313 224.125 124.893C233.382 133.317 245.549 138.657 257.645 139.55C258.777 139.634 259.915 139.675 261.047 139.675L261.047 139.675C262.829 139.675 264.596 139.55 266.359 139.363C270.009 138.969 273.589 138.152 277.068 137.009C279.826 136.103 282.502 134.986 285.081 133.671C290.946 130.675 296.253 126.689 300.655 121.986C301.996 120.556 303.27 119.079 304.438 117.53C305.566 116.027 306.591 114.468 307.526 112.866C309.872 108.862 311.583 104.571 312.547 100.12C312.766 99.122 312.994 98.12 313.137 97.104C314.746 85.379 311.568 74.558 303.93 65.804C293.54 53.891 275.509 46.494 256.858 46.494L255.568 46.517C233.042 45.59 215.721 57.851 210.135 77.284C209.739 78.68 209.399 80.117 209.119 81.588C208.794 83.304 208.54 85.056 208.393 86.867C208.372 87.096 208.332 87.308 208.317 87.537C208.21 89.175 208.21 90.782 208.271 92.374C208.51 98.384 209.998 104 212.389 109.139C213.568 111.66 214.929 114.087 216.518 116.354ZM233.057 95.936C232.62 94.027 232.376 92.092 232.351 90.152C232.351 90.007 232.33 89.858 232.33 89.71C232.336 88.136 232.549 86.554 232.858 84.995C234.499 76.872 240.551 69.525 253.799 69.525L254.53 69.52L254.881 69.55L256.622 69.52C265.91 69.52 279.234 72.369 286.242 80.397C289.762 84.434 291.087 89.169 290.3 94.875C289.827 98.303 288.401 101.39 286.314 104.094C285.537 105.092 284.664 106.034 283.724 106.923C282.17 108.396 280.423 109.721 278.514 110.876C276.316 112.207 273.929 113.324 271.43 114.197C267.099 115.716 262.468 116.528 258.05 116.528C247.188 116.48 239.307 110.287 235.311 102.249C234.306 100.24 233.56 98.114 233.057 95.936Z" fill="#f28b82" fill-rule="nonzero" opacity="1" stroke="none"/>
        </svg>
        <span class="mb-0 px-2">{{ nursery.neighborhood }}</span> </a>
    </div>


      <div class="d-flex align-items-center rounded d-flex px-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#F28B82" class="bi bi-person-arms-up mx-2" viewBox="0 0 16 16">
          <path d="M8 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"/>
          <path d="m5.93 6.704-.846 8.451a.768.768 0 0 0 1.523.203l.81-4.865a.59.59 0 0 1 1.165 0l.810 4.865a.768.768 0 0 0 1.523-.203l-.845-8.451A1.5 1.5 0 0 1 10.5 5.5L13 2.284a.796.796 0 0 0-1.239-.998L9.634 3.84a.7.7 0 0 1-.33.235c-.23.074-.665.176-1.304.176-.64 0-1.074-.102-1.305-.176a.7.7 0 0 1-.329-.235L4.239 1.286a.796.796 0 0 0-1.24.998l2.5 3.216c.317.316.475.758.43 1.204Z"/>
        </svg>
        <span> {{ nursery.min_display }}  - {{ max }}  {{max_unit}}</span>
      </div>

      {% if nursery.accepts_special_needs %}
      <div class="rounded d-flex align-items-center gap-2 px-3">
        <svg
        id="special-needs-svg"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="#F28B82"
        viewBox="0 0 392.471 392.663"
        style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round; cursor: pointer; position: relative; z-index: 0;">
        <defs/>
        <clipPath id="ArtboardFrame">
            <rect height="392.663" width="392.471" x="0.097" y="0"/>
        </clipPath>
        <g clip-path="url(#ArtboardFrame)" id="Layer" vectornator:layerName="Layer">
            <path
                d="M240.711 0C222.933 0 206.836 8.21 196.428 21.333C186.02 8.21 169.923 0 152.145 0C120.985 0 95.709 25.341 95.709 56.436C95.709 119.596 186.602 179.588 190.416 182.173C194.036 184.436 199.014 184.306 202.311 182.173C206.19 179.652 297.018 119.595 297.018 56.436C297.082 25.341 271.87 0 240.711 0ZM117.559 56.372C117.559 37.301 133.074 21.786 152.21 21.786C168.307 21.786 182.206 32.711 185.891 48.291C189.964 61.026 204.768 58.053 207.16 48.291C210.845 32.711 224.679 21.786 240.841 21.786C259.912 21.786 275.427 37.301 275.427 56.372C275.427 95.677 223.128 140.93 196.558 159.742C169.858 140.929 117.559 95.806 117.559 56.372Z"
                fill="#F28B82"
                fill-rule="nonzero"
                opacity="1"
                stroke="none"
                vectornator:layerName="path"/>
            <path
                d="M352.808 87.79C330.764 87.79 312.921 105.697 312.921 127.677L312.921 168.986C310.852 168.598 308.59 168.469 306.327 168.469C284.929 168.469 267.539 185.859 267.539 207.257L267.539 246.368L231.596 285.932C220.929 297.698 214.982 312.954 214.982 328.922L214.982 360.469C214.982 378.182 229.334 392.534 247.047 392.534L296.049 392.534C313.762 392.534 328.114 378.182 328.114 360.469L328.114 347.54C328.114 344.89 329.148 342.368 330.958 340.429L383.71 285.092C389.399 279.08 392.567 271.258 392.567 262.918L392.567 127.678C392.695 105.632 374.788 87.79 352.808 87.79ZM306.456 360.469C306.456 366.093 301.801 370.748 296.177 370.748L247.175 370.748C241.551 370.748 236.896 366.093 236.896 360.469L236.896 328.857C236.896 318.32 240.775 308.299 247.821 300.607L286.544 258.005C288.419 256.001 289.388 253.35 289.388 250.635L289.388 207.257C289.388 197.883 297.016 190.255 306.39 190.255C315.764 190.255 323.392 197.883 323.392 207.257L323.392 251.928C323.392 257.94 328.24 262.853 334.317 262.853C340.329 262.853 345.242 258.005 345.242 251.928L345.242 207.257C345.242 196.978 341.234 187.734 334.705 180.752L334.705 127.742C334.705 117.786 342.85 109.641 352.806 109.641C362.762 109.641 370.907 117.786 370.907 127.742L370.907 263.112C370.907 265.763 369.873 268.284 368.063 270.223L315.182 325.56C309.493 331.572 306.325 339.394 306.325 347.734L306.325 360.469L306.456 360.469Z"
                fill="#F28B82"
                fill-rule="nonzero"
                opacity="1"
                stroke="none"
                vectornator:layerName="path"/>
            <path
                d="M161.196 285.931L125.317 246.432L125.317 207.321C125.317 185.923 107.927 168.533 86.529 168.533C84.266 168.533 82.133 168.662 79.935 169.05L79.935 127.741C79.935 105.697 62.028 87.854 40.048 87.854C18.004 87.79 0.097 105.632 0.097 127.677L0.097 263.047C0.097 271.322 3.265 279.209 8.954 285.221L61.706 340.558C63.581 342.497 64.55 344.954 64.55 347.669L64.55 360.598C64.55 378.311 78.902 392.663 96.615 392.663L145.617 392.663C163.33 392.663 177.682 378.311 177.682 360.598L177.682 328.986C177.81 312.954 171.862 297.697 161.196 285.931ZM155.959 360.469C155.959 366.093 151.304 370.748 145.68 370.748L96.743 370.748C91.119 370.748 86.464 366.093 86.464 360.469L86.464 347.54C86.464 339.265 83.296 331.378 77.607 325.366L24.855 270.029C22.98 268.09 22.011 265.633 22.011 262.918L22.011 127.678C22.011 117.722 30.156 109.577 40.112 109.577C50.068 109.577 58.213 117.722 58.213 127.678L58.213 180.817C51.748 187.799 47.676 197.108 47.676 207.322L47.676 251.993C47.676 258.005 52.524 262.918 58.601 262.918C64.678 262.918 69.526 258.07 69.526 251.993L69.526 207.322C69.526 197.948 77.154 190.32 86.528 190.32C95.902 190.32 103.53 197.948 103.53 207.322L103.53 250.7C103.53 253.415 104.564 256.001 106.374 258.07L145.097 300.672C152.143 308.43 156.022 318.45 156.022 328.922L156.022 360.469C156.022 360.469 155.959 360.469 155.959 360.469Z"
                fill="#F28B82"
                fill-rule="nonzero"
                opacity="1"
                stroke="none"
                vectornator:layerName="path"/>
        </g>
    </svg>
      </div>
      {% endif %}

      <div class="rounded d-flex align-items-center gap-2 px-3">
          <span class="material-symbols-outlined icon">support_agent</span>
          <a class="action-link" href="tel:+{{ nursery.contact_number }}">{{ nursery.contact_number }}</a>
      </div>

      <div class="rounded d-flex align-items-center gap-2 px-3">
          <span class="material-symbols-outlined icon">mail</span>
          <a class="action-link" href="mailto:{{ nursery.email }}">{{ nursery.email }}</a>
      </div>
  </div>
</hr style="shadow-lg">

      <div class="py-5 mb-5 align-items-center text-center">
      <p class="mt-5 mb-5" style="align-items: center;">{{nursery.description}}</p>
      </div>
</section>



</div>
{% endblock %}



<!-- ------------------------------------------- -->

{% block content %}

<style>

hr {
  border: none;
  border-top: 2px dotted #ccc;
}

.text-pink {
  color: #F5888E;
}

.card-custom {
    border: 2px dotted #ccc;
    box-shadow: none;
    position: relative;
    padding-top: 40px;
    border-radius: 0.5rem;
    overflow: hidden;
}

.card-custom .card-title-icons {
    position: absolute;
    top: -20px;
    left: 10px;
    right: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: white;
    padding: 0 10px;
    border-radius: 0.5rem;
    box-sizing: border-box;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
}

.card-custom .card-title-icons .card-title {
    margin: 0;
    font-size: 1.25rem;
    font-weight: bold;
    color: #333;
}

.card-custom .card-title-icons .icon-link {
    color: #333;
    text-decoration: none;
    margin-left: 8px;
}

.card-custom .card-title-icons .icon-link:hover {
    color: #007bff;
}

.icon-links a {
    color: #343a40;
    text-decoration: none;
    margin-left: 5px;
}

.card-body {
    padding-top: 30px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.text-truncate {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.card img {
    width: 100%;
    height: auto;
    max-height: 150px;
    object-fit: cover;
}

.carousel-indicators {
    position: relative;
    display: flex;
    justify-content: center;
    padding: 0;
    margin-top: 2rem;
}

.carousel-indicators li {
    background-color: #343a40;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin: 0 5px;
    transition: background-color 0.6s ease;
}

.carousel-indicators .active {
    background-color: #F5888E;
}

.icon-link svg {
    fill: #343779;
    transition: transform 0.3s ease, fill 0.3s ease;
}

.icon-link:hover svg {
    transform: scale(1.2);
    fill: #F5888E;
}


.modal-dialog-centered {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: calc(100% - 1rem);
}

.modal-content {
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 1rem;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.modal-header .btn-close {
    margin-left: auto;
    color: #fff;
    border: none;
    opacity: 0.7;
}

.ylo-section-hr {
    height: 1in;
    background-color: #fff;
    background-image: url('/static/main/images/ylo-hr.svg');
}

.subscription-card-link {
    text-decoration: none;
    color: inherit;
}

.subscription-card-link:hover {
    text-decoration: none;
    color: inherit;
}

.subscription-card-link .card {
    cursor: pointer;
}

.card {
    border-radius: 1rem;
    transition: transform 0.2s ease-in-out;
}

.card:hover {
    transform: translateY(-10px);
}

.badge.bg-pink {
    background-color: #F5888E;
    font-size: 1rem;
    padding: 0.5rem 1rem;
}

.card-footer {
    padding-top: 0;
}

.modal-content {
    border-radius: 1rem;
    padding: 2rem;
}

.modal-content .btn-close {
    margin-top: -2rem;
    margin-right: -2rem;
}

.modal-body {
    padding-top: 0;
}

.carousel-indicators {
    position: relative;
    display: flex;
    justify-content: center;
    padding: 0;
    margin-top: 2rem;
}

.carousel-indicators li {
    background-color: #343a40;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin: 0 5px;
    transition: background-color 0.6s ease;
}

.carousel-indicators .active {
    background-color: #F5888E;
}

.icon-link {
    color: #F5888E;
}

.icon-link svg {
    fill: #343779;
    transition: transform 0.3s ease, fill 0.3s ease;
}

.icon-link:hover svg {
    transform: scale(1.2);
    fill: #F5888E;
}

#staffCarousel .carousel-control-prev-icon,
#staffCarousel .carousel-control-next-icon {
    background-image: none;
}

#staffCarousel .carousel-control-prev-icon::after,
#staffCarousel .carousel-control-next-icon::after {
    content: '';
    display: inline-block;
    width: 20px;
    height: 20px;
    border: solid #343779;
    border-width: 0 3px 3px 0;
}

#staffCarousel .carousel-control-prev-icon::after {
    transform: rotate(135deg);
    margin-right: 4px;
}

#staffCarousel .carousel-control-next-icon::after {
    transform: rotate(-45deg);
    margin-left: 4px;
}


</style>

<br/>
<br/>


    <!-- Your existing activities content here -->
    <div style="padding-bottom: 10%;">

    <div class="col position-relative text-center">
        <h3 class="mt-3" style="z-index: 1; position: inherit; padding-right: 0%;">أنشطتنا</h3>
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.2; z-index: 0; width: 250px; height: 250px;">
            <!-- Sun SVG -->
            <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="15.8673 0 446.849 478.583" width="100%" height="100%" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:vectornator="http://vectornator.io" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs/>
                <clipPath id="ArtboardFrame">
                    <rect height="478.583" width="446.849" x="15.8673" y="0"/>
                </clipPath>
                <g clip-path="url(#ArtboardFrame)" id="Layer" vectornator:layerName="Layer">
                    <path d="M361.292 186.499C338.08 147.416 298.909 132.357 255.599 142.023C239.637 145.585 246.398 170.056 262.348 166.494C303.84 157.232 336.273 181.304 349.328 220.666C359.256 250.588 344.301 281.157 323.953 302.525C284.127 344.358 217.067 347.927 174.714 308.746C145.132 281.371 135.197 236.515 145.087 198.303C156.489 154.229 196.342 137.304 238.674 142.836C254.862 144.951 254.659 119.546 238.674 117.454C104.189 99.879 79.668 278.39 177.19 342.651C240.362 384.281 324.964 354.707 362.724 293.589C383.438 260.054 380.934 219.6 361.292 186.499Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M99.479 281.727C98.532 275.044 93.307 268.28 85.154 268.28C83.686 268.28 82.168 268.504 80.645 268.951C60.366 274.81 42.431 281.067 25.828 288.074C17.279 291.679 14.852 300.17 16.228 306.985C17.626 313.911 22.687 318.573 28.824 318.573C28.824 318.573 28.824 318.573 28.829 318.573C30.69 318.573 32.63 318.146 34.59 317.324C50.969 310.407 68.712 304.222 88.836 298.403C97.466 295.904 100.404 288.226 99.479 281.727Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M38.859 78.668C62.784 94.519 88.628 110.575 122.671 130.73C125.167 132.208 127.762 132.954 130.377 132.959C137.017 132.959 143.003 128.046 144.925 121.016C146.761 114.313 144.156 107.928 138.113 104.355C104.124 84.229 78.342 68.213 54.532 52.43C51.948 50.719 49.243 49.846 46.504 49.846C40.337 49.846 34.627 54.515 32.611 61.208C30.551 68.055 32.943 74.748 38.859 78.668Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M255.091 381.727C250.76 381.727 246.758 383.347 244.118 386.17C241.587 388.882 240.386 392.527 240.665 396.707C241.904 415.312 243.151 433.918 244.471 452.509C245.159 462.116 253.121 467.134 260.642 467.134C264.978 467.134 268.975 465.509 271.605 462.685C274.129 459.974 275.312 456.328 275.012 452.149C273.692 433.553 272.453 414.962 271.214 396.357C270.575 386.749 262.618 381.727 255.091 381.727Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M143.788 348.623C138.578 348.623 134.112 351.162 131.2 355.773C110.073 389.257 88.56 422.253 66.55 455.92C63.503 460.582 63.171 465.629 65.608 470.144C68.337 475.197 74.177 478.583 80.146 478.583C80.151 478.583 80.151 478.583 80.151 478.583C85.346 478.583 89.835 476.09 92.797 471.561C114.762 437.975 136.237 405.04 157.488 371.347C160.464 366.639 160.728 361.532 158.232 357.001C155.472 351.995 149.658 348.623 143.788 348.623Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M348.958 127.262C354.148 127.262 358.643 124.797 361.628 120.321C369.443 108.596 376.983 97.036 383.342 84.551C385.896 79.536 385.734 74.223 382.895 69.592C379.899 64.707 374.425 61.551 368.946 61.551C363.771 61.551 359.348 64.407 356.815 69.389C350.594 81.592 343.14 93.027 335.406 104.633C332.324 109.261 331.953 114.283 334.365 118.788C337.071 123.85 342.936 127.257 348.958 127.262Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M449.136 389.334C426.717 371.484 407.293 357.51 388.002 345.343C385.453 343.729 382.797 342.916 380.101 342.916C373.728 342.916 367.894 347.694 365.918 354.534C363.958 361.318 366.451 367.864 372.423 371.637C390.785 383.225 408.954 396.204 427.961 411.337C430.886 413.662 434.309 414.892 437.857 414.892C437.863 414.892 437.857 414.892 437.863 414.892C444.83 414.892 451.517 410.23 453.757 403.822C455.641 398.448 453.951 393.178 449.136 389.334Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M239.474 99.317C243.826 99.317 247.794 97.69 250.354 94.856C252.812 92.137 253.883 88.491 253.457 84.317C251.05 60.725 249.634 36.98 248.39 14.685C247.85 5.045 239.941 0 232.408 0C228.082 0 224.068 1.617 221.399 4.44C218.842 7.149 217.608 10.791 217.837 14.969C219.087 37.37 220.511 61.217 222.922 84.84C223.89 94.341 231.982 99.317 239.474 99.317Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                    <path d="M447.095 205.006C438.224 206.184 412.016 206.247 406.852 206.252C397.092 206.252 391.984 213.943 391.984 221.54C391.989 229.126 397.092 236.817 406.847 236.817L406.852 236.817C412.078 236.817 438.599 236.744 447.781 235.527C456.85 234.321 462.716 228.331 462.716 220.265C462.715 212.717 455.606 203.83 447.095 205.006Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                </g>
            </svg>
        </div>
      </div>
    </div>

    {% if is_owner %}
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-end">
                <a href="{% url 'nurseries:add_activity' nursery.id %}" class="btn btn-outline-pink custom-filter-btn px-5 py-2 center rounded-pill mb-5" data-bs-toggle="modal" data-bs-target="#addActivityModal">
                    إضافة نشاط
                </a>
            </div>
        </div>
    </div>
    {% endif %}


    <section class="d-flex">
      <div class="row justify-content-between align-items-center mb-5 mt-5">



      </div>

      <div class="container-fluid px-lg-5">
          <div class="row justify-content-center align-items-center">
              <div class="col-auto">
                  <a class="mb-3" href="#activityCarousel" role="button">
                      <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708" />
                      </svg>
                  </a>
              </div>
              <div class="col-lg-8">
                  <div id="activityCarousel" class="carousel slide">
                      <div class="carousel-inner">
                          {% for activity in activities %}
                          {% if forloop.counter0|divisibleby:1 %}
                          <div class="carousel-item {% if forloop.counter0 == 0 %}active{% endif %}">
                              <div class="container">
                                  <div class="row">
                                      {% endif %}


                                      <div class="col-md col-sm mb">
                                          <div class="card card-rou">
                                            <div class="card-title-icons d-flex justify-content-between align-items-center text-pur px-lg-5">
                                              <h5 class="card-title ">{{ activity.name }}</h5>

                                            <div class="">
                                              {% if is_owner %}
                                              <div class="icon-links d-flex">
                                                  <a data-bs-toggle="modal" data-bs-target="#updateModal-{{ activity.id }}" href="#" class="icon-link me-2">
                                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#F28B82" class="bi bi-pencil" viewBox="0 0 16 16">
                                                          <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                                                      </svg>
                                                  </a>
                                                  <a data-bs-toggle="modal" data-bs-target="#deleteModal-{{ activity.id }}" href="#" class="icon-link ">
                                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#F28B82" class="bi bi-trash3" viewBox="0 0 16 16">
                                                          <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
                                                      </svg>
                                                  </a>
                                              </div>
                                              {% endif %}

                                          </div>





                                              </div>
                                              <div class="card-body color-activty ">
                                                  {% if activity.image %}
                                                  <img src="{{ activity.image.url }}" class="img-fluid " alt="{{ activity.name }}" style=" transform: translateY(-2rem);">
                                                  {% endif %}
                                                  <p class="mb-1 px-lg-5">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#F28B82" class="bi bi-person-arms-up mx-2" viewBox="0 0 16 16">
                                                      <path d="M8 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"/>
                                                      <path d="m5.93 6.704-.846 8.451a.768.768 0 0 0 1.523.203l.81-4.865a.59.59 0 0 1 1.165 0l.810 4.865a.768.768 0 0 0 1.523-.203l-.845-8.451A1.5 1.5 0 0 1 10.5 5.5L13 2.284a.796.796 0 0 0-1.239-.998L9.634 3.84a.7.7 0 0 1-.33.235c-.23.074-.665.176-1.304.176-.64 0-1.074-.102-1.305-.176a.7.7 0 0 1-.329-.235L4.239 1.286a.796.796 0 0 0-1.24.998l2.5 3.216c.317.316.475.758.43 1.204Z"/>
                                                  </svg>

                                                      <span>{{ activity.age_min }} - {{ activity.age_max }} سنوات</span>
                                                  </p>
                                                  <p class="card-text text-muted px-lg-5">
                                                      {{ activity.description }}
                                                  </p>
                                              </div>
                                          </div>
                                      </div>
                                      {% if forloop.counter|divisibleby:1 or forloop.last %}
                                  </div>
                              </div>
                          </div>
                          {% endif %}

                          <!-- Modals for Update and Delete -->
                          <!-- Update Modal -->
                          <div class="modal fade" id="updateModal-{{ activity.id }}" tabindex="-1" aria-labelledby="updateModalLabel-{{ activity.id }}" aria-hidden="true">
                              <div class="modal-dialog modal-dialog-centered">
                                  <div class="modal-content">
                                      <div class="modal-header">
                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                          <h5 class="modal-title ms-auto" id="updateModalLabel-{{ activity.id }}">تعديل بيانات النشاط</h5>
                                      </div>
                                      <div class="modal-body d-flex flex-column justify-content-between mt-3">
                                          <form method="post" action="{% url 'nurseries:update_activity' activity.id %}" enctype="multipart/form-data" class="d-flex flex-column">
                                              {% csrf_token %}
                                              <label for="activity-name-{{ activity.id }}" class="form-label text-white">اسم النشاط</label>
                                              <input type="text" class="form-control mb-3" id="activity-name-{{ activity.id }}" name="name" value="{{ activity.name }}" required>

                                              <label for="activity-description-{{ activity.id }}" class="form-label text-white">نبذة</label>
                                              <textarea class="form-control mb-3" id="activity-description-{{ activity.id }}" name="description" required>{{ activity.description }}</textarea>

                                              <label for="activity-age_min-{{ activity.id }}" class="form-label text-white">العمر الادنى</label>
                                              <input type="number" class="form-control mb-3" id="activity-age_min-{{ activity.id }}" name="age_min" value="{{ activity.age_min }}" required>

                                              <label for="activity-age_max-{{ activity.id }}" class="form-label text-white">العمر الاقصى</label>
                                              <input type="number" class="form-control mb-3" id="activity-age_max-{{ activity.id }}" name="age_max" value="{{ activity.age_max }}" required>

                                              <label for="activity-image-{{ activity.id }}" class="form-label text-white">صوره</label>
                                              <input type="file" class="form-control mb-3" id="activity-image-{{ activity.id }}" name="image" accept="image/*">

                                              <div class="mt-auto d-flex justify-content-center">
                                                  <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill">حفظ التعديلات</button>
                                              </div>
                                          </form>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- Delete Modal -->
                          <div class="modal fade" id="deleteModal-{{ activity.id }}" tabindex="-1" aria-labelledby="deleteModalLabel-{{ activity.id }}" aria-hidden="true">
                              <div class="modal-dialog modal-dialog-centered">
                                  <div class="modal-content">
                                      <div class="modal-header">
                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                          <h5 class="modal-title ms-auto" id="deleteModalLabel-{{ activity.id }}">تأكيد الحذف</h5>
                                      </div>
                                      <div class="modal-body text-center text-white mt-5">
                                          <p>
                                              هل انت متاكد من حذف
                                              <strong>"{{ activity.name }}"</strong>
                                              ؟
                                          </p>
                                      </div>

                                      <div class="modal-footer justify-content-center">
                                          <button type="button" class="btn btn-warning rounded-pill" data-bs-dismiss="modal">تراجع</button>
                                          <a href="{% url 'nurseries:delete_activity' activity.id %}" class="btn btn-danger rounded-pill">حذف</a>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          {% endfor %}
                      </div>
                  </div>
              </div>

              <!-- Right Navigation Icon -->
              <div class="col-auto">
                  <a class="mb-3" href="#activityCarousel" role="button" data-bs-slide="next">
                      <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"/>
                      </svg>
                  </a>
              </div>
          </div>
      </div>



  </section>


  <hr class="mt-5"/>
  <br/>


    <!-- staff  -->


    <section class="py-5">
      <div class="container py-5">
          <!-- Row 1: Title and Add Subscription Button -->
          <div class="row justify-content-between align-items-center mb-5">
            <div style="padding-bottom: 3%;">

              <div class="col position-relative text-center">
                  <h3 class="mt-3" style="z-index: 1; position: inherit; padding-right: 0%;">كادرنا التعليمي</h3>
                  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.2; z-index: 0; width: 250px; height: 250px;">
                      <!-- Sun SVG -->
                      <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="15.8673 0 446.849 478.583" width="100%" height="100%" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:vectornator="http://vectornator.io" xmlns:xlink="http://www.w3.org/1999/xlink">
                          <defs/>
                          <clipPath id="ArtboardFrame">
                              <rect height="478.583" width="446.849" x="15.8673" y="0"/>
                          </clipPath>
                          <g clip-path="url(#ArtboardFrame)" id="Layer" vectornator:layerName="Layer">
                              <path d="M361.292 186.499C338.08 147.416 298.909 132.357 255.599 142.023C239.637 145.585 246.398 170.056 262.348 166.494C303.84 157.232 336.273 181.304 349.328 220.666C359.256 250.588 344.301 281.157 323.953 302.525C284.127 344.358 217.067 347.927 174.714 308.746C145.132 281.371 135.197 236.515 145.087 198.303C156.489 154.229 196.342 137.304 238.674 142.836C254.862 144.951 254.659 119.546 238.674 117.454C104.189 99.879 79.668 278.39 177.19 342.651C240.362 384.281 324.964 354.707 362.724 293.589C383.438 260.054 380.934 219.6 361.292 186.499Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M99.479 281.727C98.532 275.044 93.307 268.28 85.154 268.28C83.686 268.28 82.168 268.504 80.645 268.951C60.366 274.81 42.431 281.067 25.828 288.074C17.279 291.679 14.852 300.17 16.228 306.985C17.626 313.911 22.687 318.573 28.824 318.573C28.824 318.573 28.824 318.573 28.829 318.573C30.69 318.573 32.63 318.146 34.59 317.324C50.969 310.407 68.712 304.222 88.836 298.403C97.466 295.904 100.404 288.226 99.479 281.727Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M38.859 78.668C62.784 94.519 88.628 110.575 122.671 130.73C125.167 132.208 127.762 132.954 130.377 132.959C137.017 132.959 143.003 128.046 144.925 121.016C146.761 114.313 144.156 107.928 138.113 104.355C104.124 84.229 78.342 68.213 54.532 52.43C51.948 50.719 49.243 49.846 46.504 49.846C40.337 49.846 34.627 54.515 32.611 61.208C30.551 68.055 32.943 74.748 38.859 78.668Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M255.091 381.727C250.76 381.727 246.758 383.347 244.118 386.17C241.587 388.882 240.386 392.527 240.665 396.707C241.904 415.312 243.151 433.918 244.471 452.509C245.159 462.116 253.121 467.134 260.642 467.134C264.978 467.134 268.975 465.509 271.605 462.685C274.129 459.974 275.312 456.328 275.012 452.149C273.692 433.553 272.453 414.962 271.214 396.357C270.575 386.749 262.618 381.727 255.091 381.727Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M143.788 348.623C138.578 348.623 134.112 351.162 131.2 355.773C110.073 389.257 88.56 422.253 66.55 455.92C63.503 460.582 63.171 465.629 65.608 470.144C68.337 475.197 74.177 478.583 80.146 478.583C80.151 478.583 80.151 478.583 80.151 478.583C85.346 478.583 89.835 476.09 92.797 471.561C114.762 437.975 136.237 405.04 157.488 371.347C160.464 366.639 160.728 361.532 158.232 357.001C155.472 351.995 149.658 348.623 143.788 348.623Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M348.958 127.262C354.148 127.262 358.643 124.797 361.628 120.321C369.443 108.596 376.983 97.036 383.342 84.551C385.896 79.536 385.734 74.223 382.895 69.592C379.899 64.707 374.425 61.551 368.946 61.551C363.771 61.551 359.348 64.407 356.815 69.389C350.594 81.592 343.14 93.027 335.406 104.633C332.324 109.261 331.953 114.283 334.365 118.788C337.071 123.85 342.936 127.257 348.958 127.262Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M449.136 389.334C426.717 371.484 407.293 357.51 388.002 345.343C385.453 343.729 382.797 342.916 380.101 342.916C373.728 342.916 367.894 347.694 365.918 354.534C363.958 361.318 366.451 367.864 372.423 371.637C390.785 383.225 408.954 396.204 427.961 411.337C430.886 413.662 434.309 414.892 437.857 414.892C437.863 414.892 437.857 414.892 437.863 414.892C444.83 414.892 451.517 410.23 453.757 403.822C455.641 398.448 453.951 393.178 449.136 389.334Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M239.474 99.317C243.826 99.317 247.794 97.69 250.354 94.856C252.812 92.137 253.883 88.491 253.457 84.317C251.05 60.725 249.634 36.98 248.39 14.685C247.85 5.045 239.941 0 232.408 0C228.082 0 224.068 1.617 221.399 4.44C218.842 7.149 217.608 10.791 217.837 14.969C219.087 37.37 220.511 61.217 222.922 84.84C223.89 94.341 231.982 99.317 239.474 99.317Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                              <path d="M447.095 205.006C438.224 206.184 412.016 206.247 406.852 206.252C397.092 206.252 391.984 213.943 391.984 221.54C391.989 229.126 397.092 236.817 406.847 236.817L406.852 236.817C412.078 236.817 438.599 236.744 447.781 235.527C456.85 234.321 462.716 228.331 462.716 220.265C462.715 212.717 455.606 203.83 447.095 205.006Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          </g>
                      </svg>
                  </div>
                </div>
              </div>


              {% if is_owner %}
              <div class="row">
                  <div class="col-12">
                      <div class="d-flex justify-content-end">
                          <a href="{% url 'nurseries:add_staff' nursery.id %}" class="btn btn-outline-pink custom-filter-btn px-5 py-2 center rounded-pill mb-5" data-bs-toggle="modal" data-bs-target="#addStaffModal">
                              إضافة عضو
                          </a>
                      </div>
                  </div>
              </div>
              {% endif %}

          </div>

<!-- Row 2: Packages Grid -->
<!-- all staff view -->
<div class="container-fluid px-lg-5 py-5">
  <div class="row justify-content-center align-items-center">
      <div class="col-auto">
          <a class="mb-3" href="#staffCarousel" role="button" data-bs-slide="prev">
              <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
              </svg>
          </a>
      </div>
      <div class="col-lg-8">
          <div id="staffCarousel" class="carousel slide">
              <div class="carousel-inner">
                  {% for staff in staffs %}
                      {% if forloop.counter0|divisibleby:3 %}
                          <div class="carousel-item {% if forloop.counter0 == 0 %}active{% endif %}">
                              <div class="container">
                                  <div class="row">
                      {% endif %}
                                      <div class="col-md-4 col-sm-6 mb-4">
                                          <div class="card bg-transparent border-0">
                                              <div class="card-body text-center">
                                                  <img src="{{ staff.image.url }}" alt="Staff Image" class="rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;">
                                                  <h5 class="card-title mb-1">
                                                     {{ staff.first_name }} {{ staff.last_name }}
                                                     {% if is_owner %}
                                                          <!-- Update staff icon -->
                                                          <a data-bs-toggle="modal" data-bs-target="#updateStaffModal-{{ staff.id }}" href="#" class="icon-link">
                                                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#343779" class="bi bi-pencil me-3" viewBox="0 0 16 16">
                                                                  <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                                                              </svg>
                                                          </a>
                                                          <!-- Delete staff icon -->
                                                          <a data-bs-toggle="modal" data-bs-target="#deleteStaffModal-{{ staff.id }}" href="#" class="icon-link">
                                                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#343779" class="bi bi-trash3 me-3" viewBox="0 0 16 16">
                                                                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
                                                              </svg>
                                                          </a>
                                                      {% endif %}
                                                  </h5>
                                                  <p class="text-muted">
                                                      {{ staff.specializations }}
                                                  </p>
                                                  <p class="small">
                                                     {{ staff.experience }}
                                                  </p>
                                              </div>
                                          </div>
                                      </div>
                      {% if forloop.counter|divisibleby:3 or forloop.last %}
                                  </div>
                              </div>
                          </div>
                      {% endif %}
                      <!-- Modal for staff Update Form -->
                      <div class="modal fade" id="updateStaffModal-{{ staff.id }}" tabindex="-1" aria-labelledby="updateStaffModalLabel-{{ staff.id }}" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                              <div class="modal-header">
                                  <button type="button" class="btn-close bg-transparent text-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                  <h5 class="modal-title ms-auto" id="updateStaffModalLabel-{{ staff.id }}">تعديل معلومات {{ staff.first_name }}</h5>
                              </div>


                                  <div class="modal-body mt-3">
                                      <form method="post" action="{% url 'nurseries:update_staff' staff.id %}" enctype="multipart/form-data">
                                          {% csrf_token %}
                                           <div class="mb-3 text-end">
                                              <label for="staff-first_name-{{ staff.id }}" class="form-label text-white"> الاسم الأول</label>
                                              <input type="text" class="form-control" id="staff-first_name-{{ staff.id }}" name="first_name" value="{{ staff.first_name }}" required>
                                          </div>

                                           <div class="mb-3 text-end">
                                              <label for="staff-last_name-{{ staff.id }}" class="form-label text-white">اسم العائلة </label>
                                              <input type="text" class="form-control" id="staff-last_name-{{ staff.id }}" name="last_name" value="{{ staff.last_name }}" required>
                                          </div>

                                           <div class="mb-3 text-end">
                                              <label for="staff-image-{{ staff.id }}" class="form-label text-white">صورة</label>
                                              <input type="file" class="form-control" id="staff-image-{{ staff.id }}" name="image" accept="image/*">
                                              <div class="mt-2">
                                                <span class="form-label text-white">الصورة الحالية:</span>
                                                <img src="{{ staff.image.url }}" alt="Current Staff Image" width="10%" class="img-thumbnail">
                                            </div>
                                          </div>

                                           <div class="mb-3 text-end">
                                              <label for="staff-specializations-{{ staff.id }}" class="form-label text-white">تخصصات</label>
                                              <textarea class="form-control" id="staff-specializations-{{ staff.id }}" name="specializations" required>{{ staff.specializations }}</textarea>
                                          </div>

                                           <div class="mb-3 text-end">
                                              <label for="staff-experience-{{ staff.id }}" class="form-label text-white">سنوات الخبره</label>
                                              <textarea class="form-control" id="staff-experience-{{ staff.id }}" name="experience" required>{{ staff.experience }}</textarea>
                                          </div>

                                          <div class="mt-auto d-flex justify-content-center">
                                            <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill">حفظ التعديلات</button>
                                        </div>
                                      </form>
                                  </div>
                              </div>
                          </div>
                      </div>


                      <!-- Modal for activity Deletion Confirmation -->
                      <div class="modal fade" id="deleteStaffModal-{{ staff.id }}" tabindex="-1" aria-labelledby="deleteStaffModalLabel-{{ staff.id }}" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    <h5 class="modal-title ms-auto" id="deleteStaffModalLabel-{{ staff.id }}">تأكيد الحذف </h5>
                                  </div>
                                <div class="modal-body text-center text-white mt-5">
                                    <p>
                                        هل انت متاكد من حذف
                                        <strong>"{{ staff.first_name }} {{ staff.last_name }}"</strong>
                                        ؟
                                    </p>
                                </div>

                                <div class="modal-footer justify-content-center">
                                    <button type="button" class="btn btn-warning rounded-pill" data-bs-dismiss="modal">تراجع</button>
                                    <a href="{% url 'nurseries:delete_staff' staff.id %}" class="btn btn-danger rounded-pill">حذف</a>
                                </div>
                            </div>
                        </div>
                    </div>
                  {% endfor %}
              </div>
          </div>
      </div>
      <div class="col-auto">
          <a class="mb-3" href="#staffCarousel" role="button" data-bs-slide="next">
              <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"/>
              </svg>
          </a>
      </div>
  </div>
</div>




<!-- Modal for Adding Activity -->
<div class="modal fade" id="addActivityModal" tabindex="-1" aria-labelledby="addActivityModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="btn-close bg-transparent text-white" data-bs-dismiss="modal" aria-label="Close"></button>
              <h5 class="modal-title ms-auto" id="addActivityModalLabel">إضافة نشاط</h5>
          </div>
          <div class="modal-body">
              <form method="post" action="{% url 'nurseries:add_activity' nursery.id %}" enctype="multipart/form-data">
                  {% csrf_token %}
                    <div class="form-container">
                       <div class="mb-3 text-end">
                          <label for="activity-name" class="form-label text-white">اسم النشاط</label>
                          <input type="text" class="form-control" id="activity-name" name="name" required>
                      </div>
                       <div class="mb-3 text-end">
                          <label for="activity-description" class="form-label text-white">وصف النشاط</label>
                          <textarea class="form-control" id="activity-description" name="description" ></textarea>
                      </div>
                       <div class="mb-3 text-end">
                          <label for="activity-age-min" class="form-label text-white">العمر الأدنى</label>
                          <input type="number" class="form-control" id="activity-age-min" name="age_min" required>
                      </div>
                       <div class="mb-3 text-end">
                          <label for="activity-age-max" class="form-label text-white">العمر الأقصى</label>
                          <input type="number" class="form-control" id="activity-age-max" name="age_max" required>
                      </div>
                       <div class="mb-3 text-end">
                          <label for="activity-image" class="form-label text-white">صورة النشاط</label>
                          <input type="file" class="form-control" id="activity-image" name="image">
                      </div>
                      <div class="d-flex justify-content-center mt-4">
                          <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill">أضف</button>
                      </div>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>


<hr/>
<br/>


<!-- Subscription Section -->
<section class="py-5">
  <div class="container py-5">
      <!-- Row 1: Title and Add Subscription Button -->
      <div class="row justify-content-between align-items-center mb-5 gap-5">
        <div style="padding-bottom: 3%;">

          <div class="col position-relative text-center">
              <h3 class="mt-3" style="z-index: 1; position: inherit; padding-right: 0%;">باقاتنا</h3>
              <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.2; z-index: 0; width: 250px; height: 250px;">
                  <!-- Sun SVG -->
                  <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="15.8673 0 446.849 478.583" width="100%" height="100%" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:vectornator="http://vectornator.io" xmlns:xlink="http://www.w3.org/1999/xlink">
                      <defs/>
                      <clipPath id="ArtboardFrame">
                          <rect height="478.583" width="446.849" x="15.8673" y="0"/>
                      </clipPath>
                      <g clip-path="url(#ArtboardFrame)" id="Layer" vectornator:layerName="Layer">
                          <path d="M361.292 186.499C338.08 147.416 298.909 132.357 255.599 142.023C239.637 145.585 246.398 170.056 262.348 166.494C303.84 157.232 336.273 181.304 349.328 220.666C359.256 250.588 344.301 281.157 323.953 302.525C284.127 344.358 217.067 347.927 174.714 308.746C145.132 281.371 135.197 236.515 145.087 198.303C156.489 154.229 196.342 137.304 238.674 142.836C254.862 144.951 254.659 119.546 238.674 117.454C104.189 99.879 79.668 278.39 177.19 342.651C240.362 384.281 324.964 354.707 362.724 293.589C383.438 260.054 380.934 219.6 361.292 186.499Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M99.479 281.727C98.532 275.044 93.307 268.28 85.154 268.28C83.686 268.28 82.168 268.504 80.645 268.951C60.366 274.81 42.431 281.067 25.828 288.074C17.279 291.679 14.852 300.17 16.228 306.985C17.626 313.911 22.687 318.573 28.824 318.573C28.824 318.573 28.824 318.573 28.829 318.573C30.69 318.573 32.63 318.146 34.59 317.324C50.969 310.407 68.712 304.222 88.836 298.403C97.466 295.904 100.404 288.226 99.479 281.727Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M38.859 78.668C62.784 94.519 88.628 110.575 122.671 130.73C125.167 132.208 127.762 132.954 130.377 132.959C137.017 132.959 143.003 128.046 144.925 121.016C146.761 114.313 144.156 107.928 138.113 104.355C104.124 84.229 78.342 68.213 54.532 52.43C51.948 50.719 49.243 49.846 46.504 49.846C40.337 49.846 34.627 54.515 32.611 61.208C30.551 68.055 32.943 74.748 38.859 78.668Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M255.091 381.727C250.76 381.727 246.758 383.347 244.118 386.17C241.587 388.882 240.386 392.527 240.665 396.707C241.904 415.312 243.151 433.918 244.471 452.509C245.159 462.116 253.121 467.134 260.642 467.134C264.978 467.134 268.975 465.509 271.605 462.685C274.129 459.974 275.312 456.328 275.012 452.149C273.692 433.553 272.453 414.962 271.214 396.357C270.575 386.749 262.618 381.727 255.091 381.727Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M143.788 348.623C138.578 348.623 134.112 351.162 131.2 355.773C110.073 389.257 88.56 422.253 66.55 455.92C63.503 460.582 63.171 465.629 65.608 470.144C68.337 475.197 74.177 478.583 80.146 478.583C80.151 478.583 80.151 478.583 80.151 478.583C85.346 478.583 89.835 476.09 92.797 471.561C114.762 437.975 136.237 405.04 157.488 371.347C160.464 366.639 160.728 361.532 158.232 357.001C155.472 351.995 149.658 348.623 143.788 348.623Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M348.958 127.262C354.148 127.262 358.643 124.797 361.628 120.321C369.443 108.596 376.983 97.036 383.342 84.551C385.896 79.536 385.734 74.223 382.895 69.592C379.899 64.707 374.425 61.551 368.946 61.551C363.771 61.551 359.348 64.407 356.815 69.389C350.594 81.592 343.14 93.027 335.406 104.633C332.324 109.261 331.953 114.283 334.365 118.788C337.071 123.85 342.936 127.257 348.958 127.262Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M449.136 389.334C426.717 371.484 407.293 357.51 388.002 345.343C385.453 343.729 382.797 342.916 380.101 342.916C373.728 342.916 367.894 347.694 365.918 354.534C363.958 361.318 366.451 367.864 372.423 371.637C390.785 383.225 408.954 396.204 427.961 411.337C430.886 413.662 434.309 414.892 437.857 414.892C437.863 414.892 437.857 414.892 437.863 414.892C444.83 414.892 451.517 410.23 453.757 403.822C455.641 398.448 453.951 393.178 449.136 389.334Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M239.474 99.317C243.826 99.317 247.794 97.69 250.354 94.856C252.812 92.137 253.883 88.491 253.457 84.317C251.05 60.725 249.634 36.98 248.39 14.685C247.85 5.045 239.941 0 232.408 0C228.082 0 224.068 1.617 221.399 4.44C218.842 7.149 217.608 10.791 217.837 14.969C219.087 37.37 220.511 61.217 222.922 84.84C223.89 94.341 231.982 99.317 239.474 99.317Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                          <path d="M447.095 205.006C438.224 206.184 412.016 206.247 406.852 206.252C397.092 206.252 391.984 213.943 391.984 221.54C391.989 229.126 397.092 236.817 406.847 236.817L406.852 236.817C412.078 236.817 438.599 236.744 447.781 235.527C456.85 234.321 462.716 228.331 462.716 220.265C462.715 212.717 455.606 203.83 447.095 205.006Z" fill="#f4bc74" fill-rule="nonzero" opacity="1" stroke="none" vectornator:layerName="path"/>
                      </g>
                  </svg>
              </div>
            </div>
          </div>

        {% if is_owner %}
        <div class="col-auto" style="padding-right: 80%;">
            <a href="{% url 'registrations:add_subscription' nursery.id %}" class="btn btn-outline-pink custom-filter-btn px-5 py-2 rounded-pill" data-bs-toggle="modal" data-bs-target="#addSubscriptionModal">
                إضافة باقة
            </a>
        </div>
        {% endif %}
    </div>



      <!-- Row 2: Packages Grid -->
      <div class="row row-cols-1 row-cols-md-3 g-4 py-5 mt-5">
          {% for subscription in subscriptions %}
          <div class="col">
              <div class="card h-100 text-center shadow-sm position-relative">
                  <div class="card-body">
                      <span class="badge bg-pink position-absolute top-0 start-50 translate-middle-x">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-arms-up mx-2" viewBox="0 0 16 16">
                          <path d="M8 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"/>
                          <path d="m5.93 6.704-.846 8.451a.768.768 0 0 0 1.523.203l.81-4.865a.59.59 0 0 1 1.165 0l.810 4.865a.768.768 0 0 0 1.523-.203l-.845-8.451A1.5 1.5 0 0 1 10.5 5.5L13 2.284a.796.796 0 0 0-1.239-.998L9.634 3.84a.7.7 0 0 1-.33.235c-.23.074-.665.176-1.304.176-.64 0-1.074-.102-1.305-.176a.7.7 0 0 1-.329-.235L4.239 1.286a.796.796 0 0 0-1.24.998l2.5 3.216c.317.316.475.758.43 1.204Z"/>
                      </svg>
                      <strong>العمر:</strong> {{ subscription.min_display }} - {{ subscription.max_display }}
                      </span>
                      <h2 class="card-title py-3 mt-4">{{ subscription.duration_number }} {{ subscription.get_duration_unit_display }}</h2>
                      <h4 class="text-muted">{{ subscription.price }} ريال سعودي</h4>

                      <p class="card-text">{{ subscription.description }}</p>
                  </div>
                  {% if not user.is_staff %}
                  <div class="card-footer bg-transparent border-0">
                      <button type="button" class="btn btn-dark custom-filter-btn w-100" data-bs-toggle="modal" data-bs-target="#subscriptionModal-{{ subscription.id }}">
                          للحجز
                      </button>
                  </div>
                  {% endif %}
              </div>
          </div>

          <!-- Unique Modal for Each Subscription -->

          <!-- <div class="d-flex justify-content-center align-items-center center"> -->

          <div class="modal fade" id="subscriptionModal-{{ subscription.id }}" tabindex="-1" aria-labelledby="subscriptionModalLabel-{{ subscription.id }}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered ">
                <div class="modal-content">
                    <form method="post" action="{% url 'registrations:registration_create' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" name="subscription_id" value="{{ subscription.id }}">

                        <div class="text-end">
                          <button type="button" class="btn-close bg-transparent text-white" data-bs-dismiss="modal" aria-label="Close"></button>

                        </div>

                        <div class="modal-header justify-content-center">

                            <h3 class="modal-title mb-3 text-center text-pink" id="subscriptionModalLabel-{{ subscription.id }}">
                                باقه {{ subscription.duration_number }} {{ subscription.get_duration_unit_display }}
                            </h3>
                        </div>
                        <div class="modal-body text-center">
                            <h3 class="text-white">{{ subscription.price }} ريال سعودي</h3>
                            <p class="mt-3 text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-arms-up mx-2" viewBox="0 0 16 16">
                                    <path d="M8 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"/>
                                    <path d="m5.93 6.704-.846 8.451a.768.768 0 0 0 1.523.203l.81-4.865a.59.59 0 0 1 1.165 0l.810 4.865a.768.768 0 0 0 1.523-.203l-.845-8.451A1.5 1.5 0 0 1 10.5 5.5L13 2.284a.796.796 0 0 0-1.239-.998L9.634 3.84a.7.7 0 0 1-.33.235c-.23.074-.665.176-1.304.176-.64 0-1.074-.102-1.305-.176a.7.7 0 0 1-.329-.235L4.239 1.286a.796.796 0 0 0-1.24.998l2.5 3.216c.317.316.475.758.43 1.204Z"/>
                                </svg>
                                <strong>العمر:</strong> {{ subscription.min_display }} - {{ subscription.max_display }}
                            </p>
                            <p>{{ subscription.description }}</p>
                            <label class="mt-4 text-white" for="child-selection-{{ subscription.id }}" class="form-label">اختر الطفل:</label>
                            <select class="form-select mt-3" id="child-selection-{{ subscription.id }}" name="child">
                                {% for child in request.user.parent.child_set.all %}
                                <option value="{{ child.id }}">{{ child.first_name }} {{ child.last_name }}</option>
                                {% endfor %}
                            </select>
                            <div class="d-flex justify-content-center py-3 mb-3">
                                <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill text-white">
                                    احجز
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>


          {% endfor %}
      </div>
    </div>
  </div>
</section>





<!-- Modal for Adding Subscription -->
<div class="modal fade" id="addSubscriptionModal" tabindex="-1" aria-labelledby="addSubscriptionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="btn-close bg-transparent text-white" data-bs-dismiss="modal" aria-label="Close"></button>
            <h5 class="modal-title ms-auto" id="addSubscriptionModalLabel">إضافة باقة</h5>
        </div>
          <div class="modal-body">
              <form method="post" action="{% url 'registrations:add_subscription' nursery.id %}">
                  {% csrf_token %}
                  <div class="form-container mt-3">
                       <div class="mb-3 text-end">
                          <label for="subscription-duration-number" class="form-label text-white">مدة الباقة (رقم)</label>
                          <input type="number" class="form-control" id="subscription-duration-number" name="duration_number" required>
                      </div>
                       <div class="mb-3 text-end">
                          <label for="subscription-duration-unit" class="form-label text-white">وحدة الزمن</label>
                          <select class="form-control" id="subscription-duration-unit" name="duration_unit" required>
                              <option value="day"> يوم</option>
                              <option value="week">أسبوع</option>
                              <option value="month">شهر</option>
                              <option value="year">سنة</option>
                          </select>
                      </div>
                       <div class="mb-3 text-end">
                          <label for="subscription-price" class="form-label text-white">السعر</label>
                          <input type="text" class="form-control" id="subscription-price" name="price" required>
                      </div>
                      <div class="mb-3 text-end">
                        <label for="subscription-age-min" class="form-label text-white">العمر الأدنى</label>
                        <input type="number" class="form-control" id="age-min" name="age_min" required>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="min-age-years" name="min_age_years">
                            <label class="form-check-label text-white" for="min-age-years">
                                بالسنوات
                            </label>
                        </div>
                    </div>
                     <div class="mb-3 text-end">
                        <label for="subscription-age-max" class="form-label text-white">العمر الأقصى</label>
                        <input type="number" class="form-control" id="subscription-age-max" name="age_max" required>

                        <div class="form-check">
                            <input class="form-check-input " type="checkbox" id="max-age-years" name="max_age_years">
                            <label class="form-check-label text-white" for="max-age-years">
                                بالسنوات
                            </label>
                        </div>
                          <label for="subscription-description" class="form-label text-white">وصف الباقة</label>
                          <textarea class="form-control" id="subscription-description" name="description"></textarea>
                      </div>
                      <div class="d-flex justify-content-center mt-4">
                        <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill">أضف</button>
                      </div>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>


<!-- Modal for Adding Staff -->
<div class="modal fade" id="addStaffModal" tabindex="-1" aria-labelledby="addStaffModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="btn-close bg-transparent text-white" data-bs-dismiss="modal" aria-label="Close"></button>
            <h5 class="modal-title ms-auto" id="addStaffModalLabel">إضافة عضو هيئة تدريس</h5>
        </div>
            <div class="modal-body">
                <form method="post" action="{% url 'nurseries:add_staff' nursery.id %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-container mt-3">
                         <div class="mb-3 text-end">
                            <label for="staff-first-name" class="form-label text-white">الاسم الأول</label>
                            <input type="text" class="form-control" id="staff-first-name" name="first_name" required>
                        </div>
                         <div class="mb-3 text-end">
                            <label for="staff-last-name" class="form-label text-white">اسم العائلة</label>
                            <input type="text" class="form-control" id="staff-last-name" name="last_name" required>
                        </div>
                         <div class="mb-3 text-end">
                            <label for="staff-image" class="form-label text-white">صورة</label>
                            <input type="file" class="form-control" id="staff-image" name="image">
                        </div>
                         <div class="mb-3 text-end">
                            <label for="staff-specializations" class="form-label text-white">التخصصات</label>
                            <textarea class="form-control" id="staff-specializations" name="specializations" required></textarea>
                        </div>
                         <div class="mb-3 text-end">
                            <label for="staff-experience" class="form-label text-white">الخبرة</label>
                            <textarea class="form-control" id="staff-experience" name="experience" required></textarea>
                        </div>
                        <div class="d-flex justify-content-center mt-4">
                          <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill">أضف</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Adding Gallery Items -->
<div class="modal fade" id="addGalleryModal" tabindex="-1" aria-labelledby="addGalleryModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close bg-transparent text-white" data-bs-dismiss="modal" aria-label="Close"></button>
        <h5 class="modal-title ms-auto" id="addGalleryModalLabel">أضف صورة للمعرض</h5>
      </div>

      <div class="modal-body">
        <form method="post" action="{% url 'nurseries:add_gallery' nursery.id %}" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="form-container">
             <div class="mb-3 text-end">
              <label for="gallery-image" class="form-label text-white">صورة</label>
              <input type="file" class="form-control" id="gallery-image" name="image" accept="image/*">
            </div>
            <!-- Optional video upload -->
             <div class="mb-3 text-end">
              <label for="gallery-video" class="form-label text-white">فيديو (اختياري)</label>
              <input type="file" class="form-control" id="gallery-video" name="video" accept="video/*">
            </div>
          </div>

          <div class="d-flex justify-content-center mt-4">
            <button type="submit" class="btn btn-dark custom-filter-btn rounded-pill">أضف إلى المعرض</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>




<!-- <section class="map-section">
  <div id="map-container" style="width: 100%; height: 400px;">
      {% if nurseries %}
      <iframe
          src="https://www.google.com/maps/embed/v1/place?key=**************&q={{nursery.address}}"
          width="100%"
          height="100%"
          style="border:0;"
          allowfullscreen=""
          loading="lazy">
      </iframe>

      {% else %}
          <p>No nurseries available to display on the map.</p>
      {% endif %}
  </div>
</section> -->




{% endblock %}








{% block reviews %}

<!-- reviews -->
<section class="reviews-section">
  <div class="wave-top"></div>
    {% if reviews %}
        <h3 class="py-5 mb-5 mt-5" style="text-align: center; margin-top: 5rem;">آراء أولياء الأمور</h3>

        <div class="row justify-content-center align-items-center">
            <div class="col-auto">
                <a class="mb-3" href="#reviewCarousel" role="button" data-bs-slide="prev">
                    <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
                    </svg>
                </a>
            </div>
            <div class="col-lg-8 ">
                <div id="reviewCarousel" class="carousel slide" >
                    <div class="carousel-inner">
                        {% for review in reviews %}
                            {% if forloop.counter0|divisibleby:3 %}
                                <div class="carousel-item {% if forloop.counter0 == 0 %}active{% endif %}">
                                    <div class="container">
                                        <div class="row gap-1">
                            {% endif %}
                                            <div class="col-md-4 col-sm-6 mb-4">
                                                <div class="card rounded-card">
                                                    <div class="card-body text-end">
                                                        <h3 class="mb-1">
                                                            {{ review.parent.user.first_name }} {{ review.parent.user.last_name }}
                                                        </h3>
                                                        <div class="d-flex justify-content-start flex-wrap" style="transform: translateY(-1rem); color:#F4BC74 ;">
                                                            {% if review.rating == 1 %}
                                                            <span class="material-symbols-outlined">star</span>
                                                            {% elif review.rating == 2 %}
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            {% elif review.rating == 3 %}
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            {% elif review.rating == 4 %}
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            {% elif review.rating == 5 %}
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            <span class="material-symbols-outlined">star</span>
                                                            {% endif %}
                                                        </div>
                                                        <div class="text-muted text-wrap" style="overflow-wrap: break-word;">
                                                            {{ review.comment }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                            {% if forloop.counter|divisibleby:3 or forloop.last %}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-auto">
                <a class="mb-3" href="#reviewCarousel" role="button" data-bs-slide="next">
                    <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"/>
                    </svg>
                </a>
            </div>
        </div>
    {% else %}
        <h3 class="py-3 mt-5 text-center">كن أول من يعبر عن رأيه!</h3>
    {% endif %}

    {% if request.user.is_authenticated %}
    {% if not request.user.is_superuser and not request.user.is_staff %}
        <!-- Display the form for regular authenticated users who are neither superusers nor staff -->
        <h1 class="mt-5 mb-5" style="text-align: center;">عبر عن رأيك</h1>
        <form method="post" action="{% url 'registrations:add_review' nursery.id %}" style="display: flex; flex-direction: column; align-items: center; max-width: 500px; margin: auto;">
            {% csrf_token %}
            <textarea class="form-control" name="comment" required minlength="3" placeholder="..." style="margin-bottom: 10px;"></textarea>
            <select class="form-select" name="rating" required>
                <option value="">تقييمك</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <input type="submit" class="btn" value="أضف تعليقك" style="margin-top: 10px;background-color: #FFFFFF; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1);"/>
        </form>
    {% else %}
        <!-- Specific message for superusers or staff -->
        <div class="p-3 mt-4 d-flex flex-column gap-2" style="text-align: center;">
            <h5 style="color: #FFFFFF;">فقط اولياء الامور يملكون صلاحية التعليق</h5>
        </div>
    {% endif %}
{% else %}
    <!-- Message for non-authenticated users -->
    <div class="p-3 mt-4 d-flex flex-column gap-2" style="text-align: center;">
        <h5 style="color: #FFFFFF;">فقط المسجلون في هذه الحضانه يملكون صلاحية التعليق</h5>
    </div>
{% endif %}
    <br><br>
  <div class="wave-bottom-p"></div>
</section>


</div>


{% endblock %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
      const modals = document.querySelectorAll('.modal');
      const activitiesToBlur = document.getElementById('activitiesToBlur');

      modals.forEach(modal => {
          modal.addEventListener('show.bs.modal', function() {
              activitiesToBlur.classList.add('blur-background');
          });

          modal.addEventListener('hidden.bs.modal', function() {
              activitiesToBlur.classList.remove('blur-background');
          });
      });
  });
</script>


<script>
  // Makes the entire card clickable
  document.querySelectorAll('.subscription-card-link').forEach(function(card) {
      card.addEventListener('click', function() {
          var modalId = this.getAttribute('data-bs-target');
          var modalElement = document.querySelector(modalId);
          var modal = new bootstrap.Modal(modalElement);
          modal.show();
      });
  });

</script>
